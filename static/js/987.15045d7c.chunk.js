"use strict";(self.webpackChunkfree_reporting=self.webpackChunkfree_reporting||[]).push([[987],{3987:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var r=t(4165),i=t(5861),o=t(9439),a=t(4554),s=t(5709),l=t(1413),c=t(4942),d=t(2791),u=t(7924),p=t(3400),f=t(8008),x=t(1009),h=t(5021),m=t(6278),g=t(9333),w=t(6259),j=t(9953),Z=t(493),b=t(6934),v=t(8657),y=t(1814),P=t(8475),k=t(8014),C=t(5584),S=t(5029),R=t(7740),D=t(7608),L=t(7689),F=t(3768),N=t(1473),T=t(5818),H=t(890),E=t(3721),I=t(184),M=function(e){return{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},q=function(e){return(0,c.Z)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(8)," + 1px)")})},O=(0,b.ZP)("div")((function(e){var n=e.theme;return(0,l.Z)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:n.spacing(0,1)},n.mixins.toolbar)})),A=(0,b.ZP)(j.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var n=e.theme,t=e.open;return(0,l.Z)((0,l.Z)({width:240,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},t&&(0,l.Z)((0,l.Z)({},M(n)),{},{"& .MuiDrawer-paper":M(n)})),!t&&(0,l.Z)((0,l.Z)({},q(n)),{},{"& .MuiDrawer-paper":q(n)}))}));var B=function(e){var n=e.enableFullScreen,t=e.print,r=e.exportPdf,i=e.exportHTML,a=e.openFile,s=e.id,l=d.useState(!1),c=(0,o.Z)(l,2),j=c[0],b=c[1],M=(0,d.useState)(!1),q=(0,o.Z)(M,2),B=q[0],U=q[1],W=(0,L.s0)(),V=function(e){switch(e.currentTarget.getAttribute("name")){case"Open":a(!0);break;case"Print":t();break;case"Download Pdf":r();break;case"Download Html":i();break;case"Full Screen":n();break;case"Designer":void 0!==s.current?W("/Designer?id=".concat(s.current)):W("/Designer");break;case"Exit to Home":W("/Canvas")}};return(0,d.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("id"),n=function(){W("/Designer?id=".concat(s.current))};if(null!==e&&window.addEventListener("popstate",n),null!==e)return function(){window.removeEventListener("popstate",n)}})),(0,I.jsxs)(A,{variant:"permanent",open:j,PaperProps:{sx:{backgroundColor:"lightsteelblue",color:"#000066",borderColor:"#000066"}},children:[(0,I.jsx)(O,{children:j?(0,I.jsx)(p.Z,{color:"inherit",onClick:function(){b(!1),U(!1)},children:(0,I.jsx)(x.Z,{})}):(0,I.jsx)(p.Z,{color:"inherit","aria-label":"open drawer",onClick:function(){b(!0)},children:(0,I.jsx)(f.Z,{})})}),(0,I.jsx)(u.Z,{color:"#000066"}),(0,I.jsx)(Z.Z,{children:["Open","Print","Download Pdf","Download Html"].map((function(e,n){return(0,I.jsx)(h.ZP,{disablePadding:!0,sx:{display:"block"},children:(0,I.jsxs)(m.Z,{name:e,sx:{minHeight:48,justifyContent:j?"initial":"center",px:2.5},onClick:V,children:[(0,I.jsx)(g.Z,{sx:{minWidth:0,color:"#000066",mr:j?3:"auto",justifyContent:"center"},children:(0,I.jsx)(F.Z,{title:e,children:(0,I.jsx)("div",{className:e,children:[(0,I.jsx)(v.Z,{},e),(0,I.jsx)(k.Z,{},e),(0,I.jsx)(y.Z,{},e),(0,I.jsx)(P.Z,{},e)].map((function(e,t){if(n===t)return e}))})})}),(0,I.jsx)(w.Z,{primary:e,sx:{opacity:j?1:0}})]})},e)}))}),(0,I.jsx)(u.Z,{color:"#000066"}),(0,I.jsxs)(Z.Z,{sx:{position:"absolute",bottom:"5px"},children:[["Full Screen","Designer","Exit to Home"].map((function(e,n){return(0,I.jsx)(h.ZP,{disablePadding:!0,sx:{display:"block"},children:(0,I.jsxs)(m.Z,{name:e,sx:{minHeight:48,justifyContent:j?"initial":"center",px:2.5},onClick:V,children:[(0,I.jsx)(g.Z,{sx:{minWidth:0,color:"#000066",mr:j?3:"auto",justifyContent:"center"},children:(0,I.jsx)(F.Z,{title:e,children:(0,I.jsx)("div",{className:e,children:[(0,I.jsx)(S.Z,{},e),(0,I.jsx)(R.Z,{},e),(0,I.jsx)(D.Z,{},e)].map((function(e,t){if(n===t)return e}))})})}),(0,I.jsx)(w.Z,{primary:e,sx:{opacity:j?1:0}})]})},e)})),(0,I.jsx)(h.ZP,{disablePadding:!0,sx:{display:"block"},children:(0,I.jsxs)(m.Z,{name:"Info",sx:{minHeight:48,justifyContent:j?"initial":"center",px:2.5},onClick:V,children:[(0,I.jsx)(g.Z,{sx:{minWidth:0,color:"#000066",mr:j?3:"auto",justifyContent:"center",display:j?"none":""},children:(0,I.jsx)(C.Z,{},"Info")}),(0,I.jsxs)(N.Z,{expanded:B,onChange:function(){return U((function(e){return!e}))},sx:{opacity:j?1:0,backgroundColor:"lightsteelblue",color:"#000066",padding:0,margin:0,boxShadow:"none",border:"none",transition:"background-color 0.08s ","&:hover":{backgroundColor:"#A9BCD5"}},children:[(0,I.jsxs)(T.Z,{"aria-controls":"panel1a-content",id:"panel1a-header",sx:{padding:0,margin:0},children:[(0,I.jsx)(C.Z,{},"Info"),(0,I.jsx)(H.Z,{sx:{pl:"1.5em"},children:"Info"})]}),(0,I.jsx)(E.Z,{sx:{padding:"0.5em"},children:(0,I.jsx)(H.Z,{sx:{width:"12em",whiteSpace:"normal",overflowWrap:"break-word"},children:"This is the viewer where files created with the designer can be viewed and downloaded in various preferred file formats."})})]})]})},"Info")]})]})},U=t(3540),W=t(8647),V=t(1146),z=JSON.parse('[{"id":"report.json","displayName":"my report","definition":{"Name":"Report","Width":"4.2452in","Layers":[{"Name":"default"}],"CustomProperties":[{"Name":"DisplayType","Value":"Page"},{"Name":"SizeType","Value":"Default"},{"Name":"PaperOrientation","Value":"Portrait"}],"Page":{"PageWidth":"8.5in","PageHeight":"11in","RightMargin":"1in","LeftMargin":"1in","TopMargin":"1in","BottomMargin":"1in","Columns":1,"ColumnSpacing":"0in"},"Body":{"Height":"2.7583in","ReportItems":[{"Type":"textbox","Name":"TextBox1","CanGrow":true,"KeepTogether":true,"Value":"No file to show.\\nPlease open a file to view it in the viewer.","Style":{"PaddingLeft":"2pt","PaddingRight":"2pt","PaddingTop":"2pt","PaddingBottom":"2pt","Color":"#1971b6","TextAlign":"Center","VerticalAlign":"Middle"},"Left":"2.2639in","Top":"2.2708in","Width":"1.9813in","Height":"0.4875in"}]}}}]'),J=t(9885),G=t(5391),X=t(1582),_=t(5367);function K(){var e=(0,d.useState)(z[0]),n=(0,o.Z)(e,2),t=n[0],l=n[1],c=(0,d.useState)(),p=(0,o.Z)(c,2),f=p[0],x=p[1],h=(0,d.useState)(!1),j=(0,o.Z)(h,2),b=j[0],v=j[1],y=(0,d.useRef)(),P=(0,d.useRef)(),k=(0,_.a)().user,C=(0,d.useRef)();(0,d.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("id");if(null!==e)try{C.current=e;var n=sessionStorage.getItem(e);l(JSON.parse(n))}catch(r){console.log(r)}function t(e){e.preventDefault(),console.log("popped");var n=new URLSearchParams(window.location.search).get("id");null!==n&&(window.location.href="/Designer?id=".concat(n))}return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}}),[]),(0,d.useEffect)((function(){var e={multiPage:!1,title:"Design",author:"AJRS-Canvas",keywords:"export, report",subject:"Report",pdfVersion:"2.0"};function n(){return n=(0,i.Z)((0,r.Z)().mark((function n(){var i,o,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new s.QY.PageReport,n.next=3,i.load(t.definition);case 3:return n.next=5,i.run();case 5:return o=n.sent,n.next=8,s.vr.exportDocument(o,e);case 8:a=n.sent,x(a);case 10:case"end":return n.stop()}}),n)}))),n.apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[t]);var S=(0,V.useReactToPrint)({content:function(){return P.current},documentTitle:"Invoice"});return(0,I.jsxs)(a.Z,{sx:{display:"flex"},children:[(0,I.jsx)(B,{enableFullScreen:function(){P.current&&(P.current.requestFullscreen?P.current.requestFullscreen():P.current.mozRequestFullScreen?P.current.mozRequestFullScreen():P.current.webkitRequestFullscreen?P.current.webkitRequestFullscreen():P.current.msRequestFullscreen&&P.current.msRequestFullscreen())},print:S,exportPdf:function(){y.current&&y.current.save("invoice")},exportHTML:function(){var e=document.getElementById("file").outerHTML,n=new Blob([e],{type:"text/html"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=null===t||void 0===t?void 0:t.displayName,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},openFile:v,id:C}),(0,I.jsx)(G.Z,{open:b,onClose:function(){return v(!1)},"aria-labelledby":"log-in","aria-describedby":"log-in-page",children:(0,I.jsx)(a.Z,{sx:{position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:"50vw",bgcolor:"lightsteelblue",opacity:"0.9",borderRadius:"30px",boxShadow:24,p:4},children:(0,I.jsxs)(X.Z,{direction:"column",children:[(0,I.jsx)(H.Z,{pl:"1em",children:"Open file"}),(0,I.jsx)(u.Z,{color:"#1DA1F2"}),(0,I.jsx)(Z.Z,{children:k.files.length>0?k.files.map((function(e){return(0,I.jsxs)(m.Z,{name:e.id,component:"a",onClick:function(){return function(e){var n=k.files.find((function(n){return n.id===e}));l(n),v(!1)}(e.id)},children:[(0,I.jsx)(g.Z,{children:(0,I.jsx)(J.Z,{})}),(0,I.jsx)(w.Z,{primary:e.displayName})]},e.id)})):(0,I.jsx)(H.Z,{pl:"0.5em",paragraph:!0,color:"red",children:"No file exists."})})]})})}),(0,I.jsx)(a.Z,{component:"main",sx:{flexGrow:1,p:3,background:"#e1ebfc"},children:void 0!==(null===f||void 0===f?void 0:f.data)?(0,I.jsx)(W.w,{title:t.displayName,author:"arjs-canvas",paperSize:"A4",margin:"0",scale:.75,ref:y,children:(0,I.jsx)("div",{id:"file",style:{display:"flex",justifyContent:"center",width:"100%",height:"100%",overflow:"auto"},ref:P,children:(0,U.ZP)(f.data.toString())})}):"Loading..."})]})}}}]);
//# sourceMappingURL=987.15045d7c.chunk.js.map